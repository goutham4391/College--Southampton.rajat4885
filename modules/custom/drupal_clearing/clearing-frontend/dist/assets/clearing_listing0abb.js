import{_ as x,o as l,c as i,t as o,f as d,e,F as k,r as C,h as u,d as v,i as w,k as $,w as f,v as S,l as T,m as E,n as U,p as D,g as R,a as A,b as g,C as b,S as L,q as F,j as O}from"./plugin-vue_export-helper.938277ca.js";const I={name:"ApplyButton",props:["course"]},q=["href","aria-describedby"],V={key:1};function N(t,s,r,m,h,n){return l(),i("div",null,[r.course.applyUrl?(l(),i("a",{key:0,class:"btn btn-primary btn-arrow btn-apply",href:r.course.applyUrl,"aria-describedby":"course-"+r.course.index},o(r.course.applyText),9,q)):d("",!0),r.course.applyUrl?d("",!0):(l(),i("span",V,o(r.course.applyText),1))])}var B=x(I,[["render",N],["__scopeId","data-v-7fd572dc"]]);const K={name:"CourseListing",components:{ApplyButton:B},props:["courses","updated","sync","studentType"],methods:{courseElementId:function(t){return"course-"+t.ucas},toggleFullEntReq:function(t){let s=document.getElementById("full-detail-"+t),r=document.getElementById("full-detail-expand-"+t),m=document.getElementById("full-detail-collapse-"+t),h=s.className!=="hidden";s.className=h?"hidden":"",r.className=h?"":"hidden",m.className=h?"hidden":""}}},H={class:"pt-6"},M={class:"w-full flex flex-col px-6 bg-lavender"},P=e("thead",{class:"hidden md:flex w-full"},[e("tr",{class:"flex flex-col md:flex-row w-full transparent-border clearing-border"},[e("th",{id:"view-field-course-table-column",class:"w-full md:w-1/3 pl-0 pr-6",scope:"col"},"Course name"),e("th",{id:"view-field-clearing-ucas-table-column",class:"w-full md:w-1/6 pl-0",scope:"col"},"UCAS code"),e("th",{id:"view-field-clearing-erqs-redact-table-column",class:"w-full md:w-1/3 pl-0",scope:"col"},"Entry requirements"),e("th",{id:"view-field-clearing-availability-table-column",class:"w-full md:w-1/6 pl-0",scope:"col"},"Availability")])],-1),W={class:"flex-1 sm:flex-none"},j={class:"flex flex-col md:flex-row w-full clearing-border"},G={class:"w-full md:w-1/3 pl-0 md:pr-6 pb-3 md:py-6"},Z=e("span",{class:"text-base font-bold inline-flex md:hidden wrap"},"Course name:",-1),Q=["href","id","aria-describedby"],Y=["id","aria-describedby"],z=["id"],J={class:"w-full md:w-1/6 pl-0 md:pl-1 md:pr-6 py-3 md:py-6"},X=e("span",{class:"text-base font-bold inline-flex md:hidden"},"UCAS code:",-1),ee={class:"w-full md:w-1/3 pl-0 md:pl-1 md:pr-6 py-3 md:py-6"},te=e("span",{class:"text-base font-bold inline-flex md:hidden"},"Entry requirements:",-1),se={class:"pt-4"},ae=["href"],le=u("Full requirements and detail "),ie=["id"],re=["onClick"],ne=["id"],oe=["id"],de=u(" full requirements "),ce=["id"],ue=["id"],he={class:"pt-4"},pe={class:"w-full md:w-1/6 pl-0 pb-6 md:pl-1 md:pr-6 pt-3 md:py-6"};function _e(t,s,r,m,h,n){const c=w("apply-button");return l(),i("div",H,[e("table",M,[P,e("tbody",W,[(l(!0),i(k,null,C(r.courses,a=>{var y;return l(),i("tr",j,[e("td",G,[Z,e("p",null,[a.url?(l(),i("a",{key:0,class:"link-base break-words",href:a.url,id:"course-"+a.index,"aria-describedby":"details-"+a.index},o(a.award)+" "+o(a.title),9,Q)):d("",!0)]),a.url?d("",!0):(l(),i("p",{key:0,tabindex:"0",class:"break-words",id:"course-"+a.index,"aria-describedby":"details-"+a.index},[u(o(a.award)+" "+o(a.title)+" ",1),e("span",{class:"sr-only",id:"details-"+a.index},"UCAS code: "+o(a.ucas)+". Entry requirements: "+o((y=a.entryReqShort)==null?void 0:y.replace(/([A-Z][\*]?)([A-Z])([A-Z])/g,"$1 $2 $3").replace("-"," dash "))+".",9,z)],8,Y))]),e("td",J,[X,e("p",null,o(a.ucas),1)]),e("td",ee,[te,e("p",null,o(a.entryReqShort),1),e("p",se,[a.url?(l(),i("a",{key:0,href:a.entryReqURL,class:"link-base"},[le,e("span",{class:"sr-only",id:"aria-detail-"+a.index}," for "+o(a.award)+" "+o(a.title),9,ie)],8,ae)):d("",!0),a.url?d("",!0):(l(),i("a",{key:1,tabindex:"0",class:"link-base cursor-pointer",onClick:p=>n.toggleFullEntReq(a.index)},[e("span",{id:"full-detail-expand-"+a.index},"Expand",8,ne),e("span",{id:"full-detail-collapse-"+a.index,class:"hidden"},"Collapse",8,oe),de,e("span",{class:"sr-only",id:"aria-detail-"+a.index}," for "+o(a.award)+" "+o(a.title),9,ce)],8,re))]),a.url?d("",!0):(l(),i("div",{key:0,id:"full-detail-"+a.index,class:"hidden","aria-live":"polite"},[(l(!0),i(k,null,C(a.er_full.split(`
`).filter(p=>p.length>0),p=>(l(),i("p",he,o(p),1))),256))],8,ue))]),e("td",pe,[v(c,{course:a},null,8,["course"])])])}),256))])]),e("div",null,"Source last updated: "+o(new Date(r.updated).toLocaleString())+", Last export: "+o(new Date(r.sync).toLocaleString()),1)])}var me=x(K,[["render",_e]]);const fe=$({name:"CourseFilter",props:["clearingData"],data(){return{filterText:"",studentType:"uk",availableOnly:!1,awardSelector:"all",numFilteredResults:0}},watch:{filterText(){this.update()},studentType(){this.update()},availableOnly(){this.update()},awardSelector(){this.update()},clearingDataWithSearch(){this.update()}},mounted(){this.update()},methods:{update(){let t=this.clearingDataWithSearch.filter(s=>this.filterText.split(" ").every(r=>s.search.includes(r.toLowerCase())));this.availableOnly&&(this.studentType==="uk"?t=t.filter(s=>{var r;return(r=s.uk_vacancy)!=null?r:!1}):t=t.filter(s=>{var r;return(r=s.int_vacancy)!=null?r:!1})),this.awardSelector!=="all"&&(t=t.filter(s=>s.award===this.awardSelector)),this.numFilteredResults=t.length,this.$emit("updated",t),this.$emit("studentTypeChange",this.studentType)}},computed:{awards:function(){return Array.from(new Set(this.clearingDataWithSearch.map(t=>t.award))).sort((t,s)=>t.toLowerCase().localeCompare(s.toLowerCase()))},clearingDataWithSearch(){return this.clearingData.map(t=>Object.assign(t,{search:(t.award+" "+t.ucas+" "+t.title).toLowerCase()}))}}}),_=t=>(D("data-v-794d6db6"),t=t(),R(),t),ge={class:"flex-grid flex-grid-1 bg-lavender p-8"},be=_(()=>e("div",null,[e("h3",{class:"heading-s"},"Find Courses")],-1)),ye={class:"flex-grid flex-grid-1 bg-white p-4 shadow-card"},ve={class:"grid grid-cols-1 lg:grid-cols-3 grid-align-center grid-justify-left"},we=_(()=>e("div",{class:"mb-5 mr-4"},[e("label",{class:"text-river text-xl font-bold",id:"availability"},"Show availability for:")],-1)),xe={class:"mb-5"},ke=_(()=>e("label",{for:"uk-student",class:"ml-4 control-label text-river","aria-describedby":"availability"},[e("span",{class:"sr-only"},"Only show courses available to "),u("UK applicants")],-1)),Ce={class:"mb-5"},Se=_(()=>e("label",{for:"international-student",class:"ml-4 control-label text-river","aria-describedby":"availability"},[e("span",{class:"sr-only"},"Only show courses available to "),u("International applicants")],-1)),$e=_(()=>e("div",{class:"mr-4"},[e("label",{for:"awards-select",class:"text-river font-bold text-xl"},"Only show courses for award:")],-1)),Te={class:""},Ee=_(()=>e("option",{value:"all"},"All",-1)),Ue=["value"],De={class:"relative"},Re=_(()=>e("label",{class:"label sr",for:"search-box"},"Filter courses by name or UCAS code.",-1)),Ae=_(()=>e("span",{"aria-hidden":"true",class:"absolute right-0 p-5 w-17 h-17 top-0 text-dove"},[e("svg",{class:"h-8 w-8 fill-current stroke-current"},[e("use",{"xlink:href":"https://www.southampton.ac.uk/themes/custom/drupal_endeavour/dist/icons/icons.svg#search"})])],-1)),Le={class:"flex flex-2 mt-8 ml-8 mr-8"},Fe={class:"flex-grow text-river text-xl font-bold"},Oe={class:"flex-grow"},Ie={class:"align-right pr-0"},qe=_(()=>e("label",{for:"only-show-available",class:"text-river"}," Only show courses with spaces",-1));function Ve(t,s,r,m,h,n){return l(),i("div",null,[e("div",ge,[be,e("div",ye,[e("div",ve,[we,e("div",xe,[f(e("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>t.studentType=c),value:"uk",type:"radio",id:"uk-student",name:"field_clearing_avail_uk_value",class:"radio"},null,512),[[S,t.studentType]]),ke]),e("div",Ce,[f(e("input",{"onUpdate:modelValue":s[1]||(s[1]=c=>t.studentType=c),value:"international",type:"radio",id:"international-student",name:"field_clearing_avail_internation_value",class:"radio"},null,512),[[S,t.studentType]]),Se]),$e,e("div",Te,[f(e("select",{"onUpdate:modelValue":s[2]||(s[2]=c=>t.awardSelector=c),id:"awards-select",name:"field_clearing_select",class:"form-type-select text-river border shadow mr-2 p-1"},[Ee,(l(!0),i(k,null,C(t.awards,c=>(l(),i("option",{value:c},o(c),9,Ue))),256))],512),[[T,t.awardSelector]])])])]),e("div",null,[e("div",De,[Re,f(e("input",{"onUpdate:modelValue":s[3]||(s[3]=c=>t.filterText=c),placeholder:"Type here to filter by name, award or UCAS code...",type:"text",id:"search-box",maxlength:"128",class:"shadow-card block w-full leading-loose p-6 text-md lg:text-xl placeholder:text-dove text-river font-bold h-17"},null,512),[[E,t.filterText]]),Ae])])]),e("div",Le,[e("div",Fe,o(t.numFilteredResults)+" of "+o(t.clearingData.length)+" courses",1),e("div",Oe,[e("div",Ie,[f(e("input",{"onUpdate:modelValue":s[4]||(s[4]=c=>t.availableOnly=c),type:"checkbox",id:"only-show-available",name:"field_clearing_avail_internation_value",class:"form-checkbox"},null,512),[[U,t.availableOnly]]),qe])])])])}var Ne=x(fe,[["render",Ve],["__scopeId","data-v-794d6db6"]]);const Be={components:{CourseFilter:Ne,CourseListing:me,Network:A},data(){return{clearingData:{data:[]},searchResults:[],studentType:void 0,loading:!1,networkError:!1}},computed:{errorText(){return g.errorText},phoneUK(){return this.clearingData.stage===b.pre_embargo?g.preEmbargoHotline:g.openHotline},phoneInt(){return g.intHotline},registerURL(){return g.registerURL},showLoading(){return this.loading&&this.clearingData.data.length===0},showError(){return this.networkError||!this.loading&&this.isOpen&&this.clearingData.data.length===0},results(){return L.addClearingStatusToData(this.searchResults,this.studentType,this.clearingData.stage)},isOpen(){return this.clearingData.stage===b.applications_open},isRunning(){return this.isOpen||this.isPreEmbargo||this.isGradeRelease},isEmbargo(){return this.clearingData.stage===b.embargo},isPreEmbargo(){return this.clearingData.stage===b.pre_embargo},isGradeRelease(){return this.clearingData.stage===b.grade_release}},methods:{updateResults(t){this.searchResults=t.sort((s,r)=>(s.title+" "+s.award).localeCompare(r.title+" "+r.award))},updateStudentType(t){this.studentType=t}}},Ke=e("h1",{class:"mb-8"},"Clearing vacancies",-1),He={key:0},Me={class:"text-xl text-river"},Pe={key:1},We={key:0},je={class:"mb-8"},Ge=e("h2",null,[u("Our Clearing Hotline is now closed for 2022 entry."),e("br"),e("br"),e("small",null,"We have a small number of places available on courses in our School of Health Sciences - please apply using our online form.")],-1),Ze=e("p",{class:"text-river mb-6 mt-6"},"Search Clearing spaces in our vacancies list below.",-1),Qe={key:0,class:"list-arrow text-river mb-4"},Ye={key:1,class:"list-arrow text-river mb-4"},ze={key:0,class:"text-river mb-6"},Je=u(" From Thursday 18 August you'll be able to make an application for courses that still have vacancies."),Xe=e("br",null,null,-1),et=u("You can use our online form from 8am, or get in touch on the phone. Our hotline opens from 8:15am Thursday 18 August. "),tt=[Je,Xe,et],st=F('<h2 class="mb-8 mt-8">Do you require help?</h2><p class="text-river mb-2">Speak to one of our advisors. Our phone lines are open:</p><ul><li class="list-arrow text-river mb-2">Thursday 18 and Friday 19, from 8:15am to 6pm, UK time.</li><li class="list-arrow text-river mb-4">At all other times, from 9am to 5pm, Monday to Friday, UK time.</li></ul><p class="text-river mb-2">Call us on:</p>',4),at={class:"list-arrow text-river mb-2"},lt=u("UK applicants: "),it=["href"],rt={class:"list-arrow text-river mb-4"},nt=u("International applicants: "),ot=["href"],dt={key:1},ct={key:0},ut={key:0,class:"text-xl text-river"},ht=e("p",{class:"pb-4"},"Our course vacancies page will not display any courses during the UCAS Results Embargo. Our Course vacancies list will be open on the 18th August from 08:00.",-1),pt={class:"pb-4"},_t=u("Please check back on this date or "),mt=["href"],ft=u("."),gt=e("p",{class:"pb-4"},[u("For further information on the UCAS Results Embargo visit our "),e("a",{href:"https://www.southampton.ac.uk/clearing/frequently-asked-questions",class:"link-base"},"FAQs page"),u(".")],-1),bt={key:1,class:"text-xl text-river"},yt=e("p",{class:"pb-4"},[u("Clearing is now closed, please visit "),e("a",{href:"/",class:"link-base"},"our home page"),u(" to find out how to apply outside of clearing.")],-1),vt=[yt],wt={key:1},xt=e("div",{class:"text-river text-xl"},"Loading clearing data...",-1),kt=[xt];function Ct(t,s,r,m,h,n){const c=w("Network"),a=w("CourseFilter"),y=w("CourseListing");return l(),i("div",null,[Ke,v(c,{modelValue:h.clearingData,"onUpdate:modelValue":s[0]||(s[0]=p=>h.clearingData=p),onLoading:s[1]||(s[1]=p=>this.loading=p),onFailure:s[2]||(s[2]=p=>this.networkError=p)},null,8,["modelValue"]),n.showError?(l(),i("div",He,[e("p",Me,o(n.errorText),1)])):d("",!0),n.showError?d("",!0):(l(),i("div",Pe,[n.isRunning?(l(),i("div",We,[e("div",je,[Ge,Ze,e("ul",null,[n.isPreEmbargo||n.isOpen?(l(),i("li",Qe,"If you have your results you will be able to apply here")):d("",!0),n.isPreEmbargo?(l(),i("li",Ye,"If you're still waiting for your results, you'll be able to apply in Clearing from 18th August")):d("",!0)]),n.isGradeRelease?(l(),i("div",ze,tt)):d("",!0),st,e("li",at,[lt,e("a",{href:"tel:"+n.phoneUK.replace("(0)","").replace(/ /g,""),class:"link-base"},o(n.phoneUK),9,it)]),e("li",rt,[nt,e("a",{href:"tel:"+n.phoneInt.replace("(0)","").replace(/ /g,""),class:"link-base"},o(n.phoneInt),9,ot)])]),e("div",null,[v(a,{"clearing-data":h.clearingData.data,onUpdated:n.updateResults,onStudentTypeChange:n.updateStudentType},null,8,["clearing-data","onUpdated","onStudentTypeChange"]),v(y,{courses:n.results,sync:h.clearingData.export,updated:h.clearingData.update,"student-type":h.studentType},null,8,["courses","sync","updated","student-type"])])])):d("",!0),n.isRunning?d("",!0):(l(),i("div",dt,[n.showLoading?d("",!0):(l(),i("div",ct,[n.isEmbargo?(l(),i("div",ut,[ht,e("p",pt,[_t,e("a",{href:n.registerURL,class:"link-base"},"register for updates",8,mt),ft]),gt])):d("",!0),n.isEmbargo?d("",!0):(l(),i("div",bt,vt))])),n.showLoading?(l(),i("div",wt,kt)):d("",!0)]))]))])}var St=x(Be,[["render",Ct]]);O(St).mount("#clearing_listing");
